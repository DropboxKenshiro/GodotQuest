[gd_scene load_steps=12 format=2]

[ext_resource path="res://scripts/GameController.gd" type="Script" id=1]
[ext_resource path="res://scripts/Hero.gd" type="Script" id=2]
[ext_resource path="res://graphics/characters/hero_default.png" type="Texture" id=3]
[ext_resource path="res://tilesets/default_x16.tres" type="TileSet" id=4]
[ext_resource path="res://scripts/Main_Camera.gd" type="Script" id=5]
[ext_resource path="res://scripts/DialoguePanel.gd" type="Script" id=6]
[ext_resource path="res://fonts/Perfect DOS VGA 437/Perfect DOS VGA 437.tres" type="DynamicFont" id=7]
[ext_resource path="res://scripts/NPC.gd" type="Script" id=8]
[ext_resource path="res://graphics/characters/shopkeeper.png" type="Texture" id=9]

[sub_resource type="StyleBoxFlat" id=1]
bg_color = Color( 0, 0, 0, 1 )
border_width_top = 8
border_width_right = 8
border_color = Color( 1, 1, 1, 1 )

[sub_resource type="StyleBoxFlat" id=2]
bg_color = Color( 0, 0, 0, 1 )
border_width_left = 8
border_color = Color( 1, 1, 1, 1 )

[node name="GameController" type="Node2D"]
script = ExtResource( 1 )

[node name="Hero" type="StaticBody2D" parent="." groups=[
"Entity",
]]
position = Vector2( 128, 80 )
z_index = 1
collision_mask = 0
script = ExtResource( 2 )
__meta__ = {
"_edit_group_": true
}

[node name="Collider" type="CollisionPolygon2D" parent="Hero"]
polygon = PoolVector2Array( 0, 0, 16, 0, 16, 16, 0, 16 )

[node name="Ray" type="RayCast2D" parent="Hero"]
position = Vector2( 4, 8 )
enabled = true
cast_to = Vector2( 16, 0 )

[node name="CameraFocus" type="Position2D" parent="Hero"]
position = Vector2( 8, 8 )

[node name="Sprite" type="Sprite" parent="Hero"]
texture = ExtResource( 3 )
centered = false

[node name="TileMap" type="TileMap" parent="."]
tile_set = ExtResource( 4 )
cell_size = Vector2( 16, 16 )
format = 1
tile_data = PoolIntArray( 196620, 4, 0, 196621, 4, 0, 196622, 4, 0, 196623, 4, 0, 196624, 4, 0, 196625, 4, 0, 196626, 4, 0, 196627, 4, 0, 196628, 4, 0, 196629, 4, 0, 196630, 4, 0, 196631, 4, 0, 196632, 4, 0, 196633, 4, 0, 262156, 4, 0, 262157, 5, 0, 262158, 5, 0, 262159, 5, 0, 262160, 5, 0, 262161, 5, 0, 262162, 4, 0, 262163, 5, 0, 262164, 5, 0, 262165, 5, 0, 262166, 4, 0, 262167, 5, 0, 262168, 5, 0, 262169, 4, 0, 327692, 4, 0, 327693, 5, 0, 327694, 5, 0, 327695, 5, 0, 327696, 5, 0, 327697, 5, 0, 327698, 2, 0, 327699, 5, 0, 327700, 5, 0, 327701, 5, 0, 327702, 4, 0, 327703, 2, 0, 327704, 4, 0, 327705, 4, 0, 393228, 4, 0, 393229, 5, 0, 393230, 5, 0, 393231, 5, 0, 393232, 5, 0, 393233, 5, 0, 393234, 4, 0, 393235, 5, 0, 393236, 5, 0, 393237, 5, 0, 393238, 5, 0, 393239, 5, 0, 393240, 5, 0, 393241, 4, 0, 458764, 4, 0, 458765, 5, 0, 458766, 4, 0, 458767, 4, 0, 458768, 4, 0, 458769, 4, 0, 458770, 4, 0, 458771, 4, 0, 458772, 5, 0, 458773, 5, 0, 458774, 5, 0, 458775, 5, 0, 458776, 5, 0, 458777, 4, 0, 524291, 3, 1, 524292, 3, 65537, 524293, 3, 65537, 524294, 3, 65536, 524300, 4, 0, 524301, 5, 0, 524302, 4, 0, 524303, 0, 0, 524304, 0, 0, 524305, 0, 0, 524306, 0, 0, 524307, 4, 0, 524308, 5, 0, 524309, 5, 0, 524310, 5, 0, 524311, 5, 0, 524312, 5, 0, 524313, 4, 0, 589827, 1, 0, 589828, 1, 0, 589830, 1, 0, 589836, 4, 0, 589837, 2, 0, 589838, 4, 0, 589839, 0, 0, 589843, 4, 0, 589844, 5, 0, 589845, 5, 0, 589846, 5, 0, 589847, 5, 0, 589848, 5, 0, 589849, 4, 0, 655362, 1, 0, 655365, 1, 0, 655367, 1, 0, 655379, 4, 0, 655380, 4, 0, 655381, 4, 0, 655382, 4, 0, 655383, 4, 0, 655384, 4, 0, 655385, 4, 0, 720899, 1, 0, 720900, 1, 0, 720902, 1, 0, 720903, 1, 0, 786437, 1, 0, 851971, 1, 0 )

[node name="MainCamera" type="Camera2D" parent="."]
position = Vector2( 236, 106 )
current = true
drag_margin_left = 0.0
drag_margin_top = 0.0
drag_margin_right = 0.0
drag_margin_bottom = 0.0
script = ExtResource( 5 )
zoom_table = [ 1.0, 0.5, 0.25 ]

[node name="UI" type="Control" parent="MainCamera"]
anchor_right = 1.0
margin_left = -320.0
margin_top = -240.0
margin_right = 320.0
margin_bottom = 240.0
rect_pivot_offset = Vector2( 320, 240 )
__meta__ = {
"_edit_lock_": true
}

[node name="DialoguePanel" type="Panel" parent="MainCamera/UI"]
anchor_left = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -640.0
margin_top = 390.0
margin_right = -108.0
custom_styles/panel = SubResource( 1 )
script = ExtResource( 6 )

[node name="Dialogue" type="RichTextLabel" parent="MainCamera/UI/DialoguePanel"]
margin_top = 8.0
margin_right = 516.0
margin_bottom = 90.0
custom_fonts/normal_font = ExtResource( 7 )
custom_constants/line_separation = 0
bbcode_enabled = true
scroll_active = false

[node name="ChoiceContainer" type="HSplitContainer" parent="MainCamera/UI/DialoguePanel"]
visible = false
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
margin_top = -16.0
margin_right = -4.0
dragger_visibility = 1

[node name="SidePanel" type="Panel" parent="MainCamera/UI"]
anchor_right = 1.0
margin_left = 516.0
margin_bottom = 480.0
custom_styles/panel = SubResource( 2 )

[node name="Label" type="Label" parent="MainCamera/UI/SidePanel"]
margin_left = 12.0
margin_top = 6.0
margin_right = 124.0
margin_bottom = 44.0
custom_fonts/font = ExtResource( 7 )
custom_constants/line_spacing = 0
text = "GODOT
QUEST"
align = 1
valign = 1

[node name="Bob" type="StaticBody2D" parent="." groups=[
"NPC",
]]
position = Vector2( 208, 64 )
collision_layer = 2
collision_mask = 2
script = ExtResource( 8 )
__meta__ = {
"_edit_group_": true
}
given_name = "Bob"
occupation = "Shopkeeper"
npc_id = "shopkeeper"
npc_color = Color( 0, 0.168627, 0.670588, 1 )

[node name="Sprite" type="Sprite" parent="Bob"]
texture = ExtResource( 9 )
centered = false

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Bob"]
visible = false
polygon = PoolVector2Array( 0, 0, 16, 0, 16, 16, 0, 16 )

[connection signal="choice_change" from="Hero" to="MainCamera/UI/DialoguePanel" method="_on_Hero_choice_change"]
[connection signal="dialogue_trigger" from="Hero" to="MainCamera/UI/DialoguePanel" method="_on_Hero_dialogue_trigger"]
[connection signal="hero_moved" from="Hero" to="MainCamera" method="_on_Hero_hero_moved" binds= [ Vector2( 0, 0 ) ]]
[connection signal="choice_begin" from="MainCamera/UI/DialoguePanel" to="Hero" method="_on_DialoguePanel_choice_begin"]
[connection signal="choice_end" from="MainCamera/UI/DialoguePanel" to="Hero" method="_on_DialoguePanel_choice_end"]
[connection signal="dialogue_begin" from="MainCamera/UI/DialoguePanel" to="Hero" method="_on_DialoguePanel_dialogue_begin"]
[connection signal="dialogue_end" from="MainCamera/UI/DialoguePanel" to="Hero" method="_on_DialoguePanel_dialogue_end"]
