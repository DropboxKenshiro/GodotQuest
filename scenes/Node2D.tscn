[gd_scene load_steps=10 format=2]

[ext_resource path="res://scripts/GameController.gd" type="Script" id=1]
[ext_resource path="res://scripts/NPC.gd" type="Script" id=2]
[ext_resource path="res://Fonts/GNU Unifont/Gnu Unifont DynamicFont.tres" type="DynamicFont" id=3]
[ext_resource path="res://fonts/GNU Unifont/Gnu Unifont DynamicFont.tres" type="DynamicFont" id=4]
[ext_resource path="res://scripts/Hero.gd" type="Script" id=5]
[ext_resource path="res://scripts/Main_Camera.gd" type="Script" id=6]
[ext_resource path="res://scripts/DialoguePanel.gd" type="Script" id=7]

[sub_resource type="StyleBoxEmpty" id=1]

[sub_resource type="StyleBoxEmpty" id=2]

[node name="GameController" type="Node2D"]
script = ExtResource( 1 )

[node name="Shopkeeper" type="StaticBody2D" parent="." groups=[
"NPC",
]]
editor/display_folded = true
position = Vector2( 144, 64 )
z_index = 1
collision_layer = 2
collision_mask = 3
script = ExtResource( 2 )
given_name = "Bob"
occupation = "Shopkeeper"
npc_id = "Shopkeeper"

[node name="Collider" type="CollisionPolygon2D" parent="Shopkeeper"]
polygon = PoolVector2Array( 0, 0, 8, 0, 8, 16, 0, 16 )

[node name="EventTrigger" type="CollisionPolygon2D" parent="Shopkeeper"]
polygon = PoolVector2Array( -8, 16, 16, 16, 16, 32, -8, 32, -8, 16 )

[node name="Label" type="Label" parent="Shopkeeper"]
margin_right = 8.0
margin_bottom = 16.0
custom_fonts/font = ExtResource( 3 )
custom_colors/font_color = Color( 0, 0.694118, 1, 1 )
text = "☺̈"

[node name="Building" type="StaticBody2D" parent="."]
position = Vector2( 128, 48 )
__meta__ = {
"_edit_lock_": true
}

[node name="Flooring" type="Label" parent="Building"]
margin_left = 8.0
margin_top = 16.0
margin_right = 80.0
margin_bottom = 64.0
custom_fonts/font = ExtResource( 3 )
custom_colors/font_color = Color( 0.184314, 0.184314, 0.184314, 1 )
custom_constants/line_spacing = 0
text = "░░░░░░░░░
░░░░░░░░░
░░░░░░░░░"

[node name="Label" type="Label" parent="Building"]
margin_right = 88.0
margin_bottom = 80.0
custom_fonts/font = ExtResource( 4 )
custom_colors/font_color = Color( 0.313726, 0.160784, 0, 1 )
custom_constants/line_spacing = 0
text = "╔═════════╗
║         ║
║         ║
║         ║
╚─⍍═══════╝"

[node name="Collider" type="CollisionPolygon2D" parent="Building"]
visible = false
build_mode = 1
polygon = PoolVector2Array( 16, 80, 88, 80, 88, 0, 0, 0, 0, 80, 8, 80, 8, 16, 80, 16, 80, 64, 72, 64, 16, 64 )

[node name="Counter" type="StaticBody2D" parent="Building"]
editor/display_folded = true
position = Vector2( 8, 32 )

[node name="Label" type="Label" parent="Building/Counter"]
margin_right = 72.0
margin_bottom = 16.0
custom_fonts/font = ExtResource( 3 )
custom_colors/font_color = Color( 0.341176, 0.341176, 0.341176, 1 )
text = "─────────"

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Building/Counter"]
visible = false
polygon = PoolVector2Array( 0, 0, 72, 0, 72, 16, 0, 16 )

[node name="Altar" type="StaticBody2D" parent="."]
editor/display_folded = true
position = Vector2( 336, 144 )

[node name="Flooring" type="Label" parent="Altar"]
margin_left = -8.0
margin_top = -16.0
margin_right = 40.0
margin_bottom = 48.0
custom_fonts/font = ExtResource( 3 )
custom_colors/font_color = Color( 0.196078, 0.196078, 0.196078, 1 )
custom_constants/line_spacing = 0
text = "░░░░░░
░░░░░░
░░░░░░
░░░░░░"

[node name="Label" type="Label" parent="Altar"]
margin_right = 32.0
margin_bottom = 16.0
custom_fonts/font = ExtResource( 3 )
custom_colors/font_color = Color( 0.439216, 0.439216, 0.439216, 1 )
text = "─┰┰─"

[node name="Label2" type="Label" parent="Altar"]
margin_left = 8.0
margin_top = 16.0
margin_right = 24.0
margin_bottom = 32.0
custom_fonts/font = ExtResource( 3 )
custom_colors/font_color = Color( 1, 0.203922, 0.203922, 1 )
text = "✡"
align = 1
valign = 1

[node name="Collider" type="CollisionPolygon2D" parent="Altar"]
visible = false
build_mode = 1
polygon = PoolVector2Array( 0, 0, 32, 0, 32, 16, 0, 16 )

[node name="ActivationZone" type="CollisionPolygon2D" parent="Altar"]
polygon = PoolVector2Array( 8, 16, 24, 16, 24, 32, 8, 32 )

[node name="Hero" type="StaticBody2D" parent="." groups=[
"Entity",
]]
editor/display_folded = true
position = Vector2( 136, 112 )
z_index = 1
collision_mask = 0
script = ExtResource( 5 )

[node name="Label" type="Label" parent="Hero"]
margin_right = 8.0
margin_bottom = 16.0
custom_fonts/font = ExtResource( 3 )
custom_colors/font_color = Color( 0.87451, 1, 0, 1 )
custom_constants/line_spacing = 0
text = "☻"
align = 1
valign = 1

[node name="Collider" type="CollisionPolygon2D" parent="Hero"]
polygon = PoolVector2Array( 0, 0, 8, 0, 8, 16, 0, 16 )

[node name="Ray" type="RayCast2D" parent="Hero"]
position = Vector2( 4, 8 )
enabled = true
cast_to = Vector2( 8, 0 )

[node name="CameraFocus" type="Position2D" parent="Hero"]
position = Vector2( 4, 8 )

[node name="MainCamera" type="Camera2D" parent="."]
position = Vector2( 236, 106 )
current = true
drag_margin_left = 0.0
drag_margin_top = 0.0
drag_margin_right = 0.0
drag_margin_bottom = 0.0
script = ExtResource( 6 )

[node name="UI" type="Control" parent="MainCamera"]
anchor_right = 1.0
margin_left = -320.0
margin_top = -240.0
margin_right = 320.0
margin_bottom = 240.0
rect_pivot_offset = Vector2( 320, 240 )
__meta__ = {
"_edit_lock_": true
}

[node name="SidePanel" type="Panel" parent="MainCamera/UI"]
margin_left = 508.0
margin_right = 636.0
margin_bottom = 480.0
custom_styles/panel = SubResource( 1 )

[node name="Label" type="Label" parent="MainCamera/UI/SidePanel"]
margin_left = 8.0
margin_top = 16.0
margin_right = 120.0
margin_bottom = 48.0
custom_fonts/font = ExtResource( 3 )
custom_constants/line_spacing = 0
text = "GODOT
QUEST"
align = 1
valign = 1

[node name="Border" type="Label" parent="MainCamera/UI/SidePanel"]
margin_top = -10.0
margin_right = 8.0
margin_bottom = 502.0
custom_fonts/font = ExtResource( 4 )
custom_constants/line_spacing = 0
text = "║
║
║
║
║
║
║
║
║
║
║
║
║
║
║
║
║
║
║
║
║
║
║
║
║
║
║
║
║
║
║
"

[node name="DialoguePanel" type="Panel" parent="MainCamera/UI"]
margin_left = 4.0
margin_top = 390.0
margin_right = 512.0
margin_bottom = 480.0
custom_styles/panel = SubResource( 2 )
script = ExtResource( 7 )

[node name="Dialogue" type="RichTextLabel" parent="MainCamera/UI/DialoguePanel"]
margin_top = 3.0
margin_right = 504.0
margin_bottom = 90.0
custom_fonts/bold_font = ExtResource( 3 )
custom_fonts/normal_font = ExtResource( 3 )
custom_constants/line_separation = 0
bbcode_enabled = true
scroll_active = false

[node name="ChoiceContainer" type="HSplitContainer" parent="MainCamera/UI/DialoguePanel"]
visible = false
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
margin_top = -16.0
margin_right = -4.0
dragger_visibility = 1

[node name="Border" type="Label" parent="MainCamera/UI/DialoguePanel"]
margin_left = -4.0
margin_top = -16.0
margin_right = 508.0
custom_fonts/font = ExtResource( 4 )
text = "════════════════════════════════════════════════════════════════"
align = 1
valign = 1

[connection signal="choice_change" from="Hero" to="MainCamera/UI/DialoguePanel" method="_on_Hero_choice_change"]
[connection signal="dialogue_trigger" from="Hero" to="MainCamera/UI/DialoguePanel" method="_on_Hero_dialogue_trigger"]
[connection signal="hero_moved" from="Hero" to="MainCamera" method="_on_Hero_hero_moved" binds= [ Vector2( 0, 0 ) ]]
[connection signal="dialogue_end" from="MainCamera/UI/DialoguePanel" to="Hero" method="_on_DialoguePanel_dialogue_end"]
